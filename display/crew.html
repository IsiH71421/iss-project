<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>People on the ISS</title>
  <link rel="stylesheet" href="../assets/style.css" />
</head>

<body>
  <h1>Currently on the ISS:</h1>
  <ul id="crew"></ul>

  <div class="qr-code-option">
    <span class="emoji">⬅</span> Back to Countdown
    <img src="../assets/qr_index.png" alt="Back QR" class="qr-code">
  </div>

  <script>
    function getCrewFromURL() {
      const params = new URLSearchParams(window.location.search);
      const crewParam = params.get('crew'); // z. B. '["Oleg Kononenko", "Nikolai Chub", "Tracy Caldwell Dyson"]'

      if (!crewParam) return [];

      try {
        const crewArray = JSON.parse(crewParam);
        if (Array.isArray(crewArray)) {
          return crewArray.map(name => ({ name }));
        }
      } catch (e) {
        console.error("Fehler beim Parsen des JSON:", e);
      }

      return [];
    }

    const crewList = getCrewFromURL();
    const ul = document.getElementById('crew');
    crewList.forEach(person => {
      const li = document.createElement('li');
      li.textContent = person.name;
      ul.appendChild(li);
    });
  </script>

</body>

</html>
